<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Sorteo</title>
</head>

<body>
    <img src="images/fondo-employee.png" class="backgorund-image-employee" alt="" srcset="">
    <div class="linea-fondo d-flex flex-column" style="justify-content: start;">
        <div class="d-flex flex-column align-items-center">
            <h1 style="margin-top: 120px;" class="selecting-text">Esperando al ganador</h1>
            <img src="images/adorno_ganador.png" style="width: 70%;" alt="" srcset="">
            <img src="images/loading.gif" style="width: 100%; position: absolute;" alt="" srcset="">
        </div>
    </div>
    <script>
        window.setTimeout(fetchWinenr, 4000);
        function fetchWinenr() {
            var xhttp = new XMLHttpRequest();
            xhttp.responseType = 'json';
            xhttp.onreadystatechange = function () {
                console.log(this.readyState);
                if (this.readyState == 4 && this.status == 200) {
                    var names = xhttp.response.nombre + ' ' + xhttp.response.apellido;
                    // document.getElementById('pic-employee').src = xhttp.response.imagen;
                    window.location = ('winner.html?name=' + names + '&image=' + xhttp.response.imagen);
                }
            };

            xhttp.open('GET', 'http://104.154.225.61/apiRest1/corp/v1/ganador', true);
            xhttp.setRequestHeader('Authorization', 'Bearer ' + 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJkYXRhIjp7ImNvcnBOYW1lIjoiQ09MRUdJTyJ9fQ.RW8qceXDKeJceYg-rL0pmyroF0k3ku2ot3sK4N-XyXk');
            xhttp.send();
        }
    </script>
</body>

</html>
